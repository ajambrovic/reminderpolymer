<!doctype html>
<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<html>
<head>
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <title>kart-home</title>

    <script src="../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../bower_components/web-component-tester/browser.js"></script>

    <!-- Import the element to test -->
    <link rel="import" href="../src/my-reminders.html">

</head>
<body>

<test-fixture id="basic">
    <template>
        <my-reminders></my-reminders>
    </template>
</test-fixture>

<script>
    suite('my-reminders tests', function () {
        var home;

        setup(function () {
            home = fixture('basic');
        });

        suite('_data property', function () {

            test('is defined', function () {
                assert.isDefined(home._data);
                assert.isObject(home._data);
            });

        });

        suite('title element', function () {

            test('is defined', function () {
                assert.isDefined(home.$.title);
            });

            test('sets label', function () {
                assert.equal(home.$.title.label, 'Title');
            });

            test('binds to _data.title property', function () {
                home._data = {title: 'Title of the reminder'};

                assert.equal(home.$.title.value, home._data.title);
            });

            test('sets auto-validate', function () {
                assert.isTrue(home.$.title.autoValidate);
            });

            test('is required', function () {
                home.$.title.value = '';

                assert.isFalse(home.$.title.validate());
            });

            test('sets error message', function () {
                assert.equal(home.$.title.errorMessage, 'Title is required');
            });

        });

        suite('description element', function () {

            test('is defined', function () {
                assert.isDefined(home.$.description);
            });

            test('sets label', function () {
                assert.equal(home.$.description.label, 'Detailed description');
            });

            test('binds to _data.description property', function () {
                home._data = {description: 'Reminder detailed description'};

                assert.equal(home.$.description.value, home._data.description);
            });

        });

        suite('date element', function () {

            test('is defined', function () {
                assert.isDefined(home.$.date);
            });

            test('binds to _data.data property', function () {
                home._data = {date: '17/07/2017'};

                assert.equal(home.$.date.value, home._data.date);
            });
        });

        suite('_storage property', function () {

            test('is defined', function () {
                assert.isDefined(home.storage);
                assert.isString(home.storage);
                assert.equal(home.storage, 'reminders');
            });

            test('can save', function () {
                uid = new Date,
                        storage = window.localStorage;
                storage.setItem(home.storage, uid);
                assert.equal(uid, storage.getItem(home.storage));
                storage.removeItem(home.storage);
            });
        });


    });

</script>

</body>
</html>
